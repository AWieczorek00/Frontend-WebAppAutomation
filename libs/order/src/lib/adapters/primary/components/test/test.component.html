<!--<form [formGroup]="form">-->
<!--  <mat-card class="mat-elevation-z8">-->
<!--    <mat-table-->
<!--      #table-->
<!--      class="mat-elevation-z0"-->
<!--      [dataSource]="dataSource"-->
<!--      [trackBy]="trackRows"-->
<!--    >-->
<!--      &lt;!&ndash; Product Column &ndash;&gt;-->
<!--      <ng-container matColumnDef="name">-->
<!--        &lt;!&ndash; <mat-header-cell *matHeaderCellDef>Product</mat-header-cell> &ndash;&gt;-->
<!--        <mat-cell *matCellDef="let row; let i = index">-->
<!--          <ng-container [formGroup]="row">-->
<!--            <mat-form-field class="test">-->
<!--              <input-->

<!--                matInput-->
<!--                id="activities_id_{{ i }}"-->
<!--                name="activities_id_{{ i }}"-->
<!--                [readonly]="true"-->
<!--                formControlName="name"-->
<!--                required-->
<!--              />-->
<!--            </mat-form-field>-->
<!--          </ng-container>-->
<!--        </mat-cell>-->
<!--      </ng-container>-->

<!--      &lt;!&ndash; Unit Column &ndash;&gt;-->
<!--      <ng-container matColumnDef="attention">-->
<!--        &lt;!&ndash; <mat-header-cell *matHeaderCellDef>Unit</mat-header-cell> &ndash;&gt;-->
<!--        <mat-cell *matCellDef="let row; let i = index">-->
<!--          <ng-container [formGroup]="row">-->
<!--            <mat-form-field>-->
<!--              <mat-label>Unit</mat-label>-->
<!--              <input-->
<!--                matInput-->
<!--                placeholder="attention"-->
<!--                id="product_id_{{ i }}"-->
<!--                name="product_id_{{ i }}"-->
<!--                formControlName="attention"-->
<!--                required-->
<!--              />-->
<!--            </mat-form-field>-->
<!--          </ng-container>-->
<!--        </mat-cell>-->
<!--      </ng-container>-->

<!--      &lt;!&ndash; Header Declarations &ndash;&gt;-->
<!--      &lt;!&ndash;-->
<!--      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>-->
<!--      &ndash;&gt;-->

<!--      &lt;!&ndash; Row Declarations &ndash;&gt;-->
<!--      <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>-->
<!--    </mat-table>-->

<!--    <mat-card-actions>-->
<!--      <button mat-raised-button color="primary" (click)="createRow()">-->
<!--        <mat-icon>add</mat-icon>-->
<!--        Add New-->
<!--      </button>-->
<!--    </mat-card-actions>-->
<!--  </mat-card>-->
<!--</form>-->
<form [formGroup]="form">
  <table mat-table [dataSource]="dataSource" formArrayName="activities">
    <!-- Row definitions -->
    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
    <tr mat-row *matRowDef="let row; let i = index; columns: displayColumns;"></tr>

    <!-- Column definitions -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> name </th>
      <td mat-cell *matCellDef="let row; let index = index"  [formGroupName]="index">
        <mat-form-field>
          <input matInput type="text" value="" formControlName="name">
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="attention">
      <th mat-header-cell *matHeaderCellDef> attention </th>
      <td mat-cell *matCellDef="let row; let index = index"  [formGroupName]="index">
        <mat-form-field>
          <input matInput type="text" value="" formControlName="attention">
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="done">
      <th mat-header-cell *matHeaderCellDef> done </th>
      <td mat-cell *matCellDef="let row; let index = index"  [formGroupName]="index">
        <mat-form-field>
          <input matInput type="text" value="" formControlName="done">
        </mat-form-field>
      </td>
    </ng-container>

  </table>
  <button type="button" (click)="addRow()">Add row</button>
</form>

<pre>{{ form.value | json }}</pre>
