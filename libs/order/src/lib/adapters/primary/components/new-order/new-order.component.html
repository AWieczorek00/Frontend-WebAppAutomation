<mat-tab-group>
  <mat-tab label="Zlecenie">
    <form
      class="example-form"
      [formGroup]="order"
      (ngSubmit)="onOrderSubmitted(order)"
    >
      <div class="container text-center">
        <div class="row">
          <div class="col">
            <div>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nazwa</mat-label>
                <input
                  type="text"
                  aria-label="Nazwa"
                  matInput
                  [formControl]="clientControl"
                  [matAutocomplete]="client"
                  formControlName="name"
                />
                <mat-autocomplete
                  #client="matAutocomplete"
                  (optionSelected)="getClient($event.option.value)"
                  [displayWith]="getOptionClient"
                >
                  <mat-option
                    *ngFor="let client of filteredClient | async"
                    [value]="client"
                  >
                    {{ client.name }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <br/>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nip</mat-label>
                <input formControlName="nip" autocomplete="off" matInput/>
              </mat-form-field>
              <br/>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Numer telefonu</mat-label>
                <input
                  formControlName="phoneNumber"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Email</mat-label>
                <input
                  formControlName="email"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col">
            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Status zlecenia</mat-label>
                <mat-select
                  formControlName="status"
                  panelClass="myPanelClass"
                  disableOptionCentering

                >
                  <mat-option style="font-size: 15px" value="W realizacji"
                  >W realizacji
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Wykonane"
                  >Wykonane
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Priorytet zlecenia</mat-label>
                <mat-select formControlName="priority" panelClass="myPanelClass" disableOptionCentering>
                  <mat-option style="font-size: 15px" value="Niski"
                  >Niski
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Normlany"
                  >Normlany
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Wysoki"
                  >Wysoki
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Data przyjecia</mat-label>
                <input formControlName="dateOfAdmission" matInput [matDatepicker]="dateOfAdmission"/>
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  matSuffix
                  [for]="dateOfAdmission"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfAdmission></mat-datepicker>
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Data wykonania</mat-label>
                <input formControlName="dateOfExecution" matInput [matDatepicker]="dateOfExecution"/>
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  matSuffix
                  [for]="dateOfExecution"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfExecution></mat-datepicker>
              </mat-form-field>
            </div>

            <div>
              <div class="col">
                <mat-form-field class="field-order" appearance="legacy">
                  <mat-label>Okresowość</mat-label>
                  <mat-select formControlName="period" panelClass="myPanelClass" disableOptionCentering>
                    <mat-option style="font-size: 15px" value="Niski"
                    >Niski
                    </mat-option>
                    <mat-option style="font-size: 15px" value="Normlany"
                    >Normlany
                    </mat-option>
                    <mat-option style="font-size: 15px" value="Wysoki"
                    >Wysoki
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center"><p>Dane adresowe</p></div>

      <div class="container text-center">
        <div class="row">
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>ulica</mat-label>
              <input formControlName="street" autocomplete="off" matInput/>
            </mat-form-field>
            <mat-form-field
              class="field-option"
              style="margin-right: 50px"
              appearance="legacy"
            >
              <mat-label>Numer ulicy</mat-label>
              <input
                formControlName="streetNumber"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
            <mat-form-field class="field-option" appearance="legacy">
              <mat-label>Numer lokalu</mat-label>
              <input
                formControlName="apartmentNumber"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
          </div>
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Miasto</mat-label>
              <input formControlName="city" autocomplete="off" matInput/>
            </mat-form-field>

            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Kod pocztowy</mat-label>
              <input formControlName="zipcode" autocomplete="off" matInput/>
            </mat-form-field>
          </div>
        </div>
      </div>

      <input type="submit" value="Submit"/>
    </form>
  </mat-tab>
  <mat-tab label="Czyności">
    <div class="main-div">
      <div>

        <mat-form-field appearance="legacy" class="option-table">
          <mat-label>Czyności</mat-label>
          <input
            type="text"
            aria-label="Czyności"
            matInput
            [formControl]="activitiesTemplateControl"
            [matAutocomplete]="activitiesTemplate"
          />
          <mat-autocomplete
            #activitiesTemplate="matAutocomplete"
            [displayWith]="getOptionActivitiesTemplate"
            (optionSelected)="getActivitiesTemplate($event.option.value)"
          >
            <mat-option
              *ngFor="
                let activitiesTemplate of filteredActivitiesTemplate | async
              "
              [value]="activitiesTemplate"
            >
              {{ activitiesTemplate.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <button class="btn btn-outline-primary" (click)="addActivities()">Dodaj</button>
      </div>

      <table
        mat-table
        [dataSource]="dataSourceActivities"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Nazwa czyności</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <ng-container matColumnDef="attention">
          <th mat-header-cell *matHeaderCellDef>Uwagi</th>
          <td mat-cell *matCellDef="let element">
            <fom [formGroup]="attention">


              <mat-form-field appearance="legacy">
                <input type="text" [ngModel]="mymodel" (ngModelChange)="valuechange($event,element.id)" formControlName="attention" autocomplete="off" matInput/>
              </mat-form-field>
              {{ element.attention }}

            </fom>
          </td>
        </ng-container>

        <ng-container matColumnDef="done">
          <th mat-header-cell *matHeaderCellDef>Wykonano</th>
          <td mat-cell *matCellDef="let element">
            {{ element.done }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="nameRowActivities"></tr>
        <tr mat-row *matRowDef="let row; columns: nameRowActivities"></tr>
      </table>
    </div>
  </mat-tab>

  <mat-tab label="Uwagi">
    <div class="main-div">
      <form [formGroup]="order" (ngSubmit)="onOrderSubmitted(order)">
        <mat-form-field appearance="legacy" class="textarea">
          <mat-label>Textarea</mat-label>
          <textarea formControlName="note" cdkTextareaAutosize matInput></textarea>
        </mat-form-field>
      </form>
    </div>
  </mat-tab>
  <mat-tab label="Serwisanci">
    <div class="main-div">
      <div>
        <mat-form-field appearance="legacy" class="option-table">
          <mat-label>Serwisant</mat-label>
          <input
            type="text"
            aria-label="Serwisant"
            matInput
            [formControl]="employeeControl"
            [matAutocomplete]="employee"
          />
          <mat-autocomplete
            #employee="matAutocomplete"
            [displayWith]="getOptionEmployee"
            (optionSelected)="getEmployee($event.option.value)"
          >
            <mat-option
              *ngFor="let employee of filteredEmployee | async"
              [value]="employee"
            >
              {{ employee.firstName }} {{ employee.lastName }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <button class="btn btn-outline-primary" (click)="addEmployee()">
          Dodaj
        </button>
      </div>

      <table
        mat-table
        [dataSource]="dataSourceEmployee"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef>Imię</th>
          <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
        </ng-container>

        <ng-container matColumnDef="secondName">
          <th mat-header-cell *matHeaderCellDef>Drugie imię</th>
          <td mat-cell *matCellDef="let element">
            {{ element.secondName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef>Nazwisko</th>
          <td mat-cell *matCellDef="let element">
            {{ element.lastName }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="nameRowEmployee"></tr>
        <tr mat-row *matRowDef="let row; columns: nameRowEmployee"></tr>
      </table>
    </div>
  </mat-tab>
</mat-tab-group>
