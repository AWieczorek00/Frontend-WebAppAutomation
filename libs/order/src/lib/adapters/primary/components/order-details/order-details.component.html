
<mat-tab-group (selectedTabChange)="setSummary($event, order)">
  <mat-tab label="Zlecenie">
    <form class="example-form" [formGroup]="order" (ngSubmit)="update(order)">
      <div class="container text-center">
        <div class="row">
          <div class="col">
            <div>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nazwa</mat-label>
                <input
                  type="text"
                  aria-label="Nazwa"
                  matInput
                  [formControl]="clientControl"
                  [matAutocomplete]="client"
                  formControlName="name"
                />
                <mat-autocomplete
                  #client="matAutocomplete"
                  (optionSelected)="getClient($event.option.value)"
                  [displayWith]="getOptionClient"
                >
                  <mat-option
                    *ngFor="let client of filteredClient | async"
                    [value]="client"
                  >
                    {{ client.name }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

              <br />
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nip</mat-label>
                <input formControlName="nip" autocomplete="off" matInput />
              </mat-form-field>
              <br />
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Numer telefonu</mat-label>
                <input
                  formControlName="phoneNumber"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Email</mat-label>
                <input formControlName="email" autocomplete="off" matInput />
              </mat-form-field>
            </div>
          </div>
          <div class="col">
            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Status zlecenia</mat-label>
                <mat-select
                  formControlName="status"
                  panelClass="myPanelClass"
                  disableOptionCentering
                >
                  <mat-option style="font-size: 15px" value="W realizacji"
                    >W realizacji
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Wykonane"
                    >Wykonane
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Priorytet zlecenia</mat-label>
                <mat-select
                  formControlName="priority"
                  panelClass="myPanelClass"
                  disableOptionCentering
                >
                  <mat-option style="font-size: 15px" value="Niski"
                    >Niski
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Normalny"
                    >Normalny
                  </mat-option>
                  <mat-option style="font-size: 15px" value="Wysoki"
                    >Wysoki
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Data przyjecia</mat-label>
                <input
                  formControlName="dateOfAdmission"
                  matInput
                  [matDatepicker]="dateOfAdmission"
                />
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  matSuffix
                  [for]="dateOfAdmission"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfAdmission></mat-datepicker>
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Data wykonania</mat-label>
                <input
                  formControlName="dateOfExecution"
                  matInput
                  [matDatepicker]="dateOfExecution"
                />
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  matSuffix
                  [for]="dateOfExecution"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfExecution></mat-datepicker>
              </mat-form-field>
            </div>

            <div>
              <div class="col">
                <mat-form-field class="field-order" appearance="legacy">
                  <mat-label>Okresowość</mat-label>
                  <mat-select
                    formControlName="period"
                    panelClass="myPanelClass"
                    disableOptionCentering
                  >
                    <mat-option style="font-size: 15px" value="Przegląd roczny"
                    >Przegląd roczny
                    </mat-option>
                    <mat-option style="font-size: 15px" value="Przegląd półroczny"
                    >Przegląd półroczny
                    </mat-option>
                    <mat-option style="font-size: 15px" value="Przegląd kwartalny"
                    >Przegląd kwartalny
                    </mat-option>
                    <mat-option style="font-size: 15px" value="Przegląd miesięczny"
                    >Przegląd miesięczny
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center"><p>Dane adresowe</p></div>

      <div class="container text-center">
        <div class="row">
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>ulica</mat-label>
              <input
                formControlName="street"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
            <mat-form-field
              class="field-option"
              style="margin-right: 50px"
              appearance="legacy"
            >
              <mat-label>Numer ulicy</mat-label>
              <input
                formControlName="streetNumber"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
            <mat-form-field class="field-option" appearance="legacy">
              <mat-label>Numer lokalu</mat-label>
              <input
                formControlName="apartmentNumber"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
          </div>
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Miasto</mat-label>
              <input formControlName="city" autocomplete="off" matInput />
            </mat-form-field>

            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Kod pocztowy</mat-label>
              <input formControlName="zipcode" autocomplete="off" matInput />
            </mat-form-field>
          </div>
        </div>

        <div class="main-div">
          <mat-form-field appearance="legacy" class="textarea">
            <mat-label>Textarea</mat-label>
            <textarea
              formControlName="note"
              cdkTextareaAutosize
              matInput
            ></textarea>
          </mat-form-field>
        </div>
      </div>
    </form>
  </mat-tab>
  <mat-tab label="Czyności">
    <div class="main-div">
      <div>
        <mat-form-field appearance="legacy" class="option-table">
          <mat-label>Czyności</mat-label>
          <input
            type="text"
            aria-label="Czyności"
            matInput
            [formControl]="activitiesTemplateControl"
            [matAutocomplete]="activitiesTemplate"
          />
          <mat-autocomplete
            #activitiesTemplate="matAutocomplete"
            [displayWith]="getOptionActivitiesTemplate"
            (optionSelected)="getActivitiesTemplate($event.option.value)"
          >
            <mat-option
              *ngFor="
                let activitiesTemplate of filteredActivitiesTemplate | async
              "
              [value]="activitiesTemplate"
            >
              {{ activitiesTemplate.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <button class="btn btn-outline-primary" (click)="addActivities()">
          Dodaj
        </button>
      </div>

      <form [formGroup]="order">
        <table
          mat-table
          [dataSource]="behaviorActivities"
          formArrayName="activitiesList"
          class="mat-elevation-z8"
        >
          <!-- Row definitions -->
          <tr mat-header-row *matHeaderRowDef="nameRowActivities"></tr>
          <tr
            mat-row
            *matRowDef="let row; let i = index; columns: nameRowActivities"
          ></tr>

          <!-- Column definitions -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Nazwa czyności</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              {{this.activitiesRows.at(index).get('name')?.value}}
            </td>
          </ng-container>

          <ng-container matColumnDef="attention">
            <th mat-header-cell *matHeaderCellDef>Uwagi</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              <mat-form-field>
                <input
                  matInput
                  type="text"
                  value=""
                  formControlName="attention"
                />
              </mat-form-field>
            </td>
          </ng-container>

          <ng-container matColumnDef="done">
            <th mat-header-cell *matHeaderCellDef>Wykonano</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              <div *ngIf="this.activitiesRows.at(index).get('done')?.value">
                Wykonano
              </div>
              <div *ngIf="!this.activitiesRows.at(index).get('done')?.value">
                Nie wykonano
              </div>

            </td>
          </ng-container>
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row; let index = index"
                [formGroupName]="index">
              <button
                mat-mini-fab
                color="warn"
                aria-label="Example icon button with a delete icon"
                (click)="deleteActivities(index)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>
        </table>
      </form>
    </div>
  </mat-tab>
  <mat-tab label="Serwisanci">
    <div class="main-div">
      <div>
        <mat-form-field appearance="legacy" class="option-table">
          <mat-label>Serwisant</mat-label>
          <input
            type="text"
            aria-label="Serwisant"
            matInput
            [formControl]="employeeControl"
            [matAutocomplete]="employee"
          />
          <mat-autocomplete
            #employee="matAutocomplete"
            [displayWith]="getOptionEmployee"
            (optionSelected)="getEmployee($event.option.value)"
          >
            <mat-option
              *ngFor="let employee of filteredEmployee | async"
              [value]="employee"
            >
              {{ employee.firstName }} {{ employee.lastName }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <button class="btn btn-outline-primary" (click)="addEmployee()">
          Dodaj
        </button>
      </div>

      <table
        mat-table
        [dataSource]="dataSourceEmployee"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef>Imię</th>
          <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
        </ng-container>

        <ng-container matColumnDef="secondName">
          <th mat-header-cell *matHeaderCellDef>Drugie imię</th>
          <td mat-cell *matCellDef="let element">
            {{ element.secondName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef>Nazwisko</th>
          <td mat-cell *matCellDef="let element">
            {{ element.lastName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-mini-fab
              color="warn"
              aria-label="Example icon button with a delete icon"
              (click)="deleteEmployee(element.individualId)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="nameRowEmployee"></tr>
        <tr mat-row *matRowDef="let row; columns: nameRowEmployee"></tr>
      </table>
    </div>
  </mat-tab>
  <mat-tab label="Części">
    <div class="main-div">
      <div>
        <mat-form-field appearance="legacy" class="option-table">
          <mat-label>Części</mat-label>
          <input
            type="text"
            aria-label="Części"
            matInput
            [formControl]="partsTemplateControl"
            [matAutocomplete]="partsTemplate"
          />
          <mat-autocomplete
            #partsTemplate="matAutocomplete"
            [displayWith]="getOptionPartsTemplate"
            (optionSelected)="getPartsTemplate($event.option.value)"
          >
            <mat-option
              *ngFor="let parts of filteredPartsTemplate | async"
              [value]="parts"
            >
              {{ parts.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <button class="btn btn-outline-primary" (click)="addPart()">
          Dodaj
        </button>
      </div>

      <form [formGroup]="order">
        <table
          mat-table
          [dataSource]="behaviorParts"
          formArrayName="partList"
          class="mat-elevation-z8"
        >
          <tr mat-header-row *matHeaderRowDef="nameRowParts"></tr>
          <tr
            mat-row
            *matRowDef="let row; let i = index; columns: nameRowParts"
          ></tr>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Nazwa części</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              {{this.partRows.at(index).get('name')?.value}}
            </td>
          </ng-container>

          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef>Cena netto</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              {{this.partRows.at(index).get('price')?.value}}
            </td>
          </ng-container>

          <ng-container matColumnDef="tax">
            <th mat-header-cell *matHeaderCellDef>Podatek</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              {{this.taxToPercent(this.partRows.at(index).get('tax')?.value)}}%
            </td>
          </ng-container>

          <ng-container matColumnDef="brutto">
            <th mat-header-cell *matHeaderCellDef>Cena Brutto</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              {{this.brutto(this.partRows.at(index).get('tax')?.value,this.partRows.at(index).get('price')?.value)}}

            </td>
          </ng-container>

          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef>Ilość</th>
            <td
              mat-cell
              *matCellDef="let row; let index = index"
              [formGroupName]="index"
            >
              <mat-form-field>
                <input
                  matInput
                  type="number"
                  value=""
                  formControlName="amount"
                />
              </mat-form-field>
            </td>
          </ng-container>
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element; let index = index"
                [formGroupName]="index">
              <button
                mat-mini-fab
                color="warn"
                aria-label="Example icon button with a delete icon"
                (click)="deleteParts(index)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>
        </table>
      </form>
    </div>
  </mat-tab>
  <mat-tab label="Robocizna">
    <form [formGroup]="order" (ngSubmit)="update(order)">
      <div class="container text-center">
        <div class="row">
          <div class="col">
            <div style="display: flex">
              <mat-form-field class="field-manHour" appearance="legacy">
                <mat-label>Odległość w km</mat-label>
                <input
                  (keyup.enter)="setDistance(order)"
                  formControlName="distance"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
              <div
                style="height: 60px; position: relative;margin-left: 100px;"
              >
                <div
                  style="
                    text-align: center;
                    font-size: 20px;
                    position: absolute;
                    top: 50%;
                    width: 50px;
                  "
                >
                  2 Zł
                </div>
                <div
                  style="
                    text-align: center;
                    font-size: 20px;
                    position: absolute;
                    top: 50%;
                    width: 100px;
                    margin-left: 100px;
                  "
                >
                  {{ summaryDistance }} zł
                </div>
              </div>
            </div>

            <div style="display: flex">
              <mat-form-field class="field-manHour" appearance="legacy">
                <mat-label>Roboczogodzina</mat-label>
                <input
                  formControlName="manHour"
                  autocomplete="off"
                  matInput
                  (keyup.enter)="setManHour(order)"
                />
              </mat-form-field>
              <div
                style="height: 60px; position: relative;margin-left: 100px;"
              >
                <div
                  style="
                    text-align: center;
                    font-size: 20px;
                    position: absolute;
                    top: 50%;
                    width: 50px;

                  "
                >
                  50 Zł
                </div>

                <div
                  style="
                    text-align: center;
                    font-size: 20px;
                    position: absolute;
                    top: 50%;
                    width: 100px;
                    margin-left: 100px;
                  "
                >
                  {{ summaryManHour }} zł
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </mat-tab>
  <mat-tab label="Podsumowanie">
    <form class="example-form" [formGroup]="order" (ngSubmit)="update(order)">
      <div class="container text-center">
        <div class="row">
          <div class="col">
            <div>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nazwa</mat-label>
                <input
                  type="text"
                  aria-label="Nazwa"
                  matInput
                  [formControl]="clientControl"
                  [matAutocomplete]="client"
                  formControlName="name"
                  [readonly]="true"
                />
                <mat-autocomplete
                  #client="matAutocomplete"
                  (optionSelected)="getClient($event.option.value)"
                  [displayWith]="getOptionClient"
                >
                  <mat-option
                    *ngFor="let client of filteredClient | async"
                    [value]="client"
                  >
                    {{ client.name }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <br />
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Nip</mat-label>
                <input
                  [readonly]="true"
                  formControlName="nip"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
              <br />
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Numer telefonu</mat-label>
                <input
                  [readonly]="true"
                  formControlName="phoneNumber"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
              <mat-form-field class="field-order" appearance="legacy">
                <mat-label>Email</mat-label>
                <input
                  [readonly]="true"
                  formControlName="email"
                  autocomplete="off"
                  matInput
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col">
            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Status zlecenia</mat-label>
                <input formControlName="status" [readonly]="true" matInput />
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Priorytet zlecenia</mat-label>
                <input [readonly]="true" matInput formControlName="priority" />
              </mat-form-field>
            </div>

            <div>
              <mat-form-field
                class="field-option"
                appearance="legacy"
                style="margin-right: 50px"
              >
                <mat-label>Data przyjecia</mat-label>
                <input
                  [readonly]="true"
                  formControlName="dateOfAdmission"
                  matInput
                  [matDatepicker]="dateOfAdmissionSummary"
                />
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  disabled
                  matSuffix
                  [for]="dateOfAdmissionSummary"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfAdmissionSummary></mat-datepicker>
              </mat-form-field>

              <mat-form-field class="field-option" appearance="legacy">
                <mat-label>Data wykonania</mat-label>
                <input
                  [readonly]="true"
                  formControlName="dateOfExecution"
                  matInput
                  [matDatepicker]="dateOfExecutionSummary"
                />
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  disabled
                  matSuffix
                  [for]="dateOfExecutionSummary"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfExecutionSummary></mat-datepicker>
              </mat-form-field>
            </div>

            <div>
              <div class="col">
                <mat-form-field class="field-order" appearance="legacy">
                  <mat-label>Okresowość</mat-label>
                  <input [readonly]="true" matInput formControlName="period" />
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center"><p>Dane adresowe</p></div>

      <div class="container text-center">
        <div class="row">
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>ulica</mat-label>
              <input formControlName="street" autocomplete="off" matInput />
            </mat-form-field>
            <mat-form-field
              class="field-option"
              style="margin-right: 50px"
              appearance="legacy"
            >
              <mat-label>Numer ulicy</mat-label>
              <input
                formControlName="streetNumber"
                autocomplete="off"
                matInput
                [readonly]="true"
              />
            </mat-form-field>
            <mat-form-field class="field-option" appearance="legacy">
              <mat-label>Numer lokalu</mat-label>
              <input
                formControlName="apartmentNumber"
                autocomplete="off"
                matInput
                [readonly]="true"
              />
            </mat-form-field>
          </div>
          <div class="col-sm">
            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Miasto</mat-label>
              <input
                [readonly]="true"
                formControlName="city"
                autocomplete="off"
                matInput
              />
            </mat-form-field>

            <mat-form-field class="field-order" appearance="legacy">
              <mat-label>Kod pocztowy</mat-label>
              <input
                [readonly]="true"
                formControlName="zipcode"
                autocomplete="off"
                matInput
              />
            </mat-form-field>
          </div>
        </div>

        <div class="main-div">
          <mat-form-field appearance="legacy" class="textarea">
            <mat-label>Textarea</mat-label>
            <textarea
              [readonly]="true"
              formControlName="note"
              cdkTextareaAutosize
              matInput
            ></textarea>
          </mat-form-field>
        </div>
      </div>

      <div class="parent">
        <div class="div1">
          <table
            mat-table
            [dataSource]="dataSourceEmployee"
            class="mat-elevation-z8"
            style="width: 100%; max-width: 500px"
          >
            <ng-container
              style="width: 100%; max-width: 150px; min-width: 100px"
              matColumnDef="firstName"
            >
              <th mat-header-cell *matHeaderCellDef>Imię</th>
              <td mat-cell *matCellDef="let element">
                {{ element.firstName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="secondName">
              <th mat-header-cell *matHeaderCellDef>Drugie imię</th>
              <td mat-cell *matCellDef="let element">
                {{ element.secondName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="lastName">
              <th mat-header-cell *matHeaderCellDef>Nazwisko</th>
              <td mat-cell *matCellDef="let element">
                {{ element.lastName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="delete">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element"></td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="nameRowEmployee"></tr>
            <tr mat-row *matRowDef="let row; columns: nameRowEmployee"></tr>
          </table>
        </div>
        <div class="div2">
          <table
            mat-table
            [dataSource]="behaviorActivities"
            formArrayName="activitiesList"
            class="mat-elevation-z8"
            style="width: 100%; max-width: 500px"
          >
            <!-- Row definitions -->
            <tr mat-header-row *matHeaderRowDef="nameRowActivities"></tr>
            <tr
              mat-row
              *matRowDef="let row; let i = index; columns: nameRowActivities"
            ></tr>

            <!-- Column definitions -->
            <ng-container
              matColumnDef="name"
              style="width: 100%; max-width: 100px"
            >
              <th mat-header-cell *matHeaderCellDef>Nazwa czyności</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                <mat-form-field class="disable-input">
                  <input
                    matInput
                    type="text"
                    value=""
                    formControlName="name"
                    [readonly]="true"
                  />
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="attention">
              <th mat-header-cell *matHeaderCellDef>Uwagi</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                <mat-form-field class="disable-input">
                  <input
                    matInput
                    type="text"
                    value=""
                    formControlName="attention"
                    [readonly]="true"
                  />
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="done">
              <th mat-header-cell *matHeaderCellDef>Wykonano</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                <div *ngIf="this.activitiesRows.at(index).get('attention')?.value">
                  Wykonano
                </div>
                <div *ngIf="!this.activitiesRows.at(index).get('attention')?.value">
                  Nie wykonano
                </div>

              </td>
            </ng-container>

            <ng-container matColumnDef="delete">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element"></td>
            </ng-container>
          </table>
        </div>
        <div class="div3">
          <table
            mat-table
            [dataSource]="behaviorParts"
            formArrayName="partList"
            class="mat-elevation-z8"
            style="width: 100%; max-width: 500px"
          >
            <tr mat-header-row *matHeaderRowDef="nameRowParts"></tr>
            <tr
              mat-row
              *matRowDef="let row; let i = index; columns: nameRowParts"
            ></tr>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Nazwa części</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                {{this.partRows.at(index).get('name')?.value}}
              </td>
            </ng-container>

            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef>Cena netto</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                {{this.partRows.at(index).get('price')?.value}}
              </td>
            </ng-container>

            <ng-container matColumnDef="tax">
              <th mat-header-cell *matHeaderCellDef>Podatek</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                {{this.taxToPercent(this.partRows.at(index).get('tax')?.value)}}%
              </td>
            </ng-container>

            <ng-container matColumnDef="brutto">
              <th mat-header-cell *matHeaderCellDef>Cena Brutto</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                {{this.brutto(this.partRows.at(index).get('tax')?.value,this.partRows.at(index).get('price')?.value)}}

              </td>
            </ng-container>

            <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef>Ilość</th>
              <td
                mat-cell
                *matCellDef="let row; let index = index"
                [formGroupName]="index"
              >
                <mat-form-field class="disable-input">
                  <input
                    matInput
                    type="number"
                    value=""
                    formControlName="amount"
                    [readonly]="true"
                  />
                </mat-form-field>
              </td>
            </ng-container>
            <ng-container matColumnDef="delete">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">

              </td>
            </ng-container>
          </table>
        </div>
      </div>

      <input class="btn btn-outline-primary" type="submit" value="Zapisz" />
    </form>
    <button class="btn btn-outline-primary" (click)="orderPdf(order)">Drukuj protokół</button>

  </mat-tab>
</mat-tab-group>
